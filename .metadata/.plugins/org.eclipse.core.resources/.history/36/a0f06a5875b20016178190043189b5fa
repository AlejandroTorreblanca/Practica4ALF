package código;

import java.io.*;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class FIEBDCFixing {

	private static File fichero;
	private static PrintWriter escritor;
	/**
	 * Comprueba que la extensión del nombre del fichero sea la correcta.
	 * @param nombreFichero nombre que se desea comprobar.
	 * @return true si tiene extensión .stl, false en caso contrario.
	 */
	public static boolean comprobarNombreFichero(String nombreFichero) 
	{
       Pattern pat = Pattern.compile("\\.[BC3]|[bc3]$");
       Matcher mat = pat.matcher(nombreFichero);
       if (mat.find()) //En este caso si que se puede usar find
    	   return true; 	//Caso en el que el fichero tiene extensión correcta
        else 
    	   return false;    //Caso en el que el fichero no tiene extensión correcta
	}
	
	private static void procesarLinea(String linea) {
		
		
	}
	
	
	
	public static void leerFichero(String nombreFichero)throws IOException 
	{
		File fichero = new File (nombreFichero); // Crea un objeto File a partir del nombre del fichero a leer
		FileReader fr = new FileReader(fichero); //Crea un FileReader para recorrer el fichero y recuperar el contenido
		BufferedReader br = new BufferedReader(fr); //Crea un BufferedReader a partir del FileReader para leer por líneas el contenido.
		StringBuffer texto=new StringBuffer();
		String linea;
		boolean finDeFichero=false;
		while(!finDeFichero)
		{
			if( (linea = br.readLine()) == null )
				finDeFichero=true;
			procesarLinea(linea);
		}
		br.close();
		fr.close();
	}
	
	public static void main(String[] args) {
		Scanner consola = new Scanner(System.in); //Crea Scanner para leer por consola
		boolean control=true;
		System.out.println("Nombre del fichero a leer con extensión .bc3 o .BC3: ");
		String nombreFichero=consola.nextLine(); //lee la línea con el nombre de fichero  desde consola
		while(control)
		{
		    if(!comprobarNombreFichero(nombreFichero))
				System.err.println("Extensión del fichero incorrecta, asegurese de que tiene extensión .bc3 o .BC3.");
			else 
			{
				try {
					leerFichero(nombreFichero);	//se intenta leer el contenido de fichero
					control=false;			  
				} catch (IOException e) {
					System.err.println("***Error de lectura***\n Asegurese de que el fichero existe."); 
					control=true;
				    } 	
			}
		}
		fichero =new File(nombreFichero);
		escritor = new PrintWriter(fichero);
		
		consola.close();
	}

}
