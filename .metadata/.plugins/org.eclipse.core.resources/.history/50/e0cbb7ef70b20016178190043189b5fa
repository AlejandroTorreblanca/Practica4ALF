package código;

import java.io.*;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class FIEBDCFixing {

	/**
	 * Comprueba que la extensión del nombre del fichero sea la correcta.
	 * @param nombreFichero nombre que se desea comprobar.
	 * @return true si tiene extensión .stl, false en caso contrario.
	 */
	public static boolean comprobarNombreFichero(String nombreFichero) 
	{
       Pattern pat = Pattern.compile("\\.[BC3]|[bc3]$");
       Matcher mat = pat.matcher(nombreFichero);
       if (mat.find()) //En este caso si que se puede usar find
    	   return true; 	//Caso en el que el fichero tiene extensión correcta
        else 
    	   return false;    //Caso en el que el fichero no tiene extensión correcta
	}
	
	public static void leerFichero(String nombreFichero)throws IOException 
	{
		Scanner lector = new Scanner(new File(nombreFichero),"8859_1");
		String linea = null;
		while (lector.hasNextLine()) {
			linea = lector.readLine();
			// Procesar linea
			}
		lector.close();
	}
	
	public static void main(String[] args) {
		Scanner consola = new Scanner(System.in); //Crea Scanner para leer por consola
		boolean control=true;
		while(control)
		{
			System.out.println("Nombre del fichero a leer con extensión .stl: ");
		    String nombreFich=consola.nextLine(); //lee la línea con el nombre de fichero  desde consola
		    if(!comprobarNombreFichero(nombreFich))
				System.err.println("Extensión del fichero incorrecta, asegurese de que tiene extensión .stl.");
			else 
			{
				try {
					leerFichero(nombreFich);	//se intenta leer el contenido de fichero
					control=false;			  
				} catch (IOException e) {
					System.err.println("***Error de lectura***\n Asegurese de que el fichero existe."); 
					control=true;
				    } 	
			}
		}
		
		consola.close();
	}

}
